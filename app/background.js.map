{"version":3,"file":"background.js","sources":["src/background/windowState.js","src/background/utils.js","src/env.js","src/background/icon.js","src/background/mainWindow.js","src/i18n/index.js","src/background/aboutDialog.js","src/background/appData.js","src/background/certificate.js","src/background/dock.js","src/background/menus.js","src/background/notifications.js","src/background/screenshareDialog.js","src/background/tray.js","src/background/updateDialog.js","src/background/updates.js","src/background/servers.js","src/background.js"],"sourcesContent":["import { app, screen } from 'electron';\r\nimport jetpack from 'fs-jetpack';\r\n\r\n\r\nconst debounce = (f, delay) => {\r\n\tlet call;\r\n\tlet timeout;\r\n\r\n\r\n\tconst ret = function(...args) {\r\n\t\tcall = () => f.apply(this, args);\r\n\t\tclearTimeout(timeout);\r\n\t\ttimeout = setTimeout(call, delay);\r\n\t};\r\n\r\n\tret.flush = () => {\r\n\t\tclearTimeout(timeout);\r\n\t\tcall();\r\n\t};\r\n\r\n\treturn ret;\r\n};\r\n\r\nexport default (name, defaults) => {\r\n\r\n\tlet state = {\r\n\t\twidth: defaults.width,\r\n\t\theight: defaults.height,\r\n\t};\r\n\r\n\tconst userDataDir = jetpack.cwd(app.getPath('userData'));\r\n\tconst stateStoreFile = `window-state-${ name }.json`;\r\n\r\n\ttry {\r\n\t\tstate = userDataDir.read(stateStoreFile, 'json') || state;\r\n\t} catch (err) {\r\n\t\tconsole.error(`Failed to load \"${ name }\" window state`);\r\n\t\tconsole.error(err);\r\n\t}\r\n\r\n\tconst saveState = (window) => {\r\n\t\tif (window.isDestroyed()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstate.isMaximized = window.isMaximized();\r\n\t\tstate.isMinimized = window.isMinimized();\r\n\t\tstate.isHidden = !window.isMinimized() && !window.isVisible();\r\n\r\n\t\tif (!state.isMaximized && !state.isHidden) {\r\n\t\t\t[state.x, state.y] = window.getPosition();\r\n\t\t\t[state.width, state.height] = window.getSize();\r\n\t\t}\r\n\r\n\t\tuserDataDir.write(stateStoreFile, state, { atomic: true });\r\n\t};\r\n\r\n\tconst isInsideSomeScreen = (state) => screen.getAllDisplays().some(({ bounds }) => (\r\n\t\tstate.x >= bounds.x &&\r\n\t\tstate.y >= bounds.y &&\r\n\t\tstate.x + state.width <= bounds.x + bounds.width &&\r\n\t\tstate.y + state.height <= bounds.y + bounds.height\r\n\t));\r\n\r\n\tconst loadState = function(window) {\r\n\t\tif (!isInsideSomeScreen(state)) {\r\n\t\t\tconst { bounds } = screen.getPrimaryDisplay();\r\n\t\t\tstate.x = (bounds.width - defaults.width) / 2;\r\n\t\t\tstate.y = (bounds.height - defaults.height) / 2;\r\n\t\t\tstate.width = defaults.width;\r\n\t\t\tstate.height = defaults.height;\r\n\t\t}\r\n\r\n\t\tif (this.x !== undefined && this.y !== undefined) {\r\n\t\t\twindow.setPosition(this.x, this.y, false);\r\n\t\t}\r\n\r\n\t\tif (this.width !== undefined && this.height !== undefined) {\r\n\t\t\twindow.setSize(this.width, this.height, false);\r\n\t\t}\r\n\r\n\t\tthis.isMaximized ? window.maximize() : window.unmaximize();\r\n\t\tthis.isMinimized ? window.minimize() : window.restore();\r\n\t\tthis.isHidden ? window.hide() : window.show();\r\n\t};\r\n\r\n\treturn {\r\n\t\tget x() { return state.x && Math.floor(state.x); },\r\n\t\tget y() { return state.y && Math.floor(state.y); },\r\n\t\tget width() { return state.width && Math.floor(state.width); },\r\n\t\tget height() { return state.height && Math.floor(state.height); },\r\n\t\tget isMaximized() { return state.isMaximized; },\r\n\t\tget isMinimized() { return state.isMinimized; },\r\n\t\tget isHidden() { return state.isHidden; },\r\n\t\tsaveState: debounce(saveState, 1000), // see https://github.com/RocketChat/Rocket.Chat.Electron/issues/181\r\n\t\tloadState,\r\n\t};\r\n};\r\n","import { app } from 'electron';\r\n\r\nexport const whenReady = app.whenReady || (() => new Promise((resolve) => {\r\n\tapp.isReady() ? resolve() : app.once('ready', () => resolve());\r\n}));\r\n\r\nexport const whenReadyToShow =\r\n\t(window) => new Promise((resolve) => window.on('ready-to-show', resolve));\r\n","export default require('./env.json');\r\n","import { BrowserWindow, nativeImage } from 'electron';\r\nimport jetpack from 'fs-jetpack';\r\nimport { whenReadyToShow } from './utils';\r\n\r\nlet rendererWindow = null;\r\n\r\nconst getRendererWindow = async() => {\r\n\tif (!rendererWindow) {\r\n\t\trendererWindow = new BrowserWindow({ show: false });\r\n\r\n\t\tconst dataURL = `data:text/html,<!doctype html>\r\n\t\t${ jetpack.read(`${ __dirname }/public/images/icon.svg`) }`;\r\n\r\n\t\trendererWindow.loadURL(dataURL);\r\n\t\tawait whenReadyToShow(rendererWindow);\r\n\t}\r\n\r\n\treturn rendererWindow;\r\n};\r\n\r\n/* istanbul ignore next */\r\nconst renderInWindow = async(style) => {\r\n\tconst statusColors = {\r\n\t\toffline: null,\r\n\t\taway: 'yellow',\r\n\t\tbusy: 'red',\r\n\t\tonline: 'lime',\r\n\t};\r\n\r\n\tconst create = ({ overlay, template, status, badgeText } = {}) => {\r\n\t\tconst svg = document.querySelector('#icon').cloneNode(true);\r\n\r\n\t\tsvg.querySelector('.logo .baloon').style.fill = template ? '#FFFFFF' : '#DB2323';\r\n\t\tsvg.querySelector('.logo .circles').style.fill = template ? '#FFFFFF' : '#DB2323';\r\n\t\tsvg.querySelector('.status .away').style.fill = template ? '#FFFFFF' : '#DB2323';\r\n\t\tsvg.querySelector('.status .busy').style.fill = template ? '#FFFFFF' : '#DB2323';\r\n\r\n\t\tsvg.querySelector('.logo .bubble').style.display = template ? 'none' : null;\r\n\r\n\t\tsvg.querySelector('.badge').style.display = (!template && badgeText) ? null : 'none';\r\n\t\tsvg.querySelector('.badge text').innerHTML = badgeText;\r\n\r\n\t\tsvg.querySelector('.logo .circles').style.display = (template && status && status !== 'online') ? 'none' : '';\r\n\t\tsvg.querySelector('.status circle').style.display = (template || !status) ? 'none' : null;\r\n\t\tsvg.querySelector('.status .away').style.display = (template && status === 'away') ? null : 'none';\r\n\t\tsvg.querySelector('.status .busy').style.display = (template && status === 'busy') ? null : 'none';\r\n\t\tsvg.querySelector('.status circle').style.fill = statusColors[status];\r\n\r\n\t\tif (overlay) {\r\n\t\t\tconst overlaySVG = svg.cloneNode(true);\r\n\t\t\tsvg.remove();\r\n\r\n\t\t\toverlaySVG.querySelector('.logo').remove();\r\n\t\t\toverlaySVG.querySelector('.status').remove();\r\n\t\t\toverlaySVG.setAttribute('viewBox', '96 -32 160 160');\r\n\r\n\t\t\treturn overlaySVG;\r\n\t\t}\r\n\r\n\t\treturn svg;\r\n\t};\r\n\r\n\tconst rasterize = async(svg, size) => {\r\n\t\tconst image = new Image();\r\n\t\timage.src = `data:image/svg+xml,${ encodeURIComponent(svg.outerHTML) }`;\r\n\t\timage.width = image.height = size;\r\n\t\tawait new Promise((resolve, reject) => {\r\n\t\t\timage.onload = resolve;\r\n\t\t\timage.onerror = reject;\r\n\t\t});\r\n\r\n\t\tconst canvas = document.createElement('canvas');\r\n\t\tcanvas.width = canvas.height = size;\r\n\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\t\tctx.drawImage(image, 0, 0);\r\n\r\n\t\treturn canvas.toDataURL('image/png');\r\n\t};\r\n\r\n\tconst svg = create(style);\r\n\tconst pixelRatio = window.devicePixelRatio;\r\n\tconst sizes = Array.isArray(style.size) ? style.size : [style.size || 256];\r\n\tconst images = await Promise.all(sizes.map(async(size) => ({\r\n\t\tdataURL: await rasterize(svg, size * pixelRatio),\r\n\t\tsize,\r\n\t\tpixelRatio,\r\n\t})));\r\n\tsvg.remove();\r\n\treturn images;\r\n};\r\n\r\nconst render = async(style = {}) => {\r\n\tconst encodedArgs = JSON.stringify(style);\r\n\trender.cache = render.cache || [];\r\n\r\n\tif (render.cache[encodedArgs]) {\r\n\t\treturn render.cache[encodedArgs];\r\n\t}\r\n\r\n\tconst rendererWindow = await getRendererWindow();\r\n\tconst jsCode = `(${ renderInWindow.toString() })(${ encodedArgs })`;\r\n\tconst images = await rendererWindow.webContents.executeJavaScript(jsCode);\r\n\tconst image = nativeImage.createEmpty();\r\n\tfor (const { dataURL, size, pixelRatio } of images) {\r\n\t\timage.addRepresentation({\r\n\t\t\tscaleFactor: pixelRatio,\r\n\t\t\twidth: size,\r\n\t\t\theight: size,\r\n\t\t\tdataURL,\r\n\t\t});\r\n\t}\r\n\timage.setTemplateImage(style.template || false);\r\n\trender.cache[encodedArgs] = image;\r\n\r\n\treturn image;\r\n};\r\n\r\nexport default {\r\n\trender,\r\n};\r\n","import { app, BrowserWindow, ipcMain } from 'electron';\r\nimport createWindowStateKeeper from './windowState';\r\nimport { whenReady, whenReadyToShow } from './utils';\r\nimport env from '../env';\r\nimport icon from './icon';\r\n\r\n\r\nlet mainWindow = null;\r\n\r\nlet state = {\r\n\thideOnClose: false,\r\n};\r\n\r\nconst mainWindowOptions = {\r\n\twidth: 1000,\r\n\theight: 600,\r\n\tminWidth: 600,\r\n\tminHeight: 400,\r\n\ttitleBarStyle: 'hidden',\r\n\tshow: false,\r\n};\r\n\r\nconst setState = (partialState) => {\r\n\tstate = {\r\n\t\t...state,\r\n\t\t...partialState,\r\n\t};\r\n};\r\n\r\nconst attachWindowStateHandling = (mainWindow) => {\r\n\tconst windowStateKeeper = createWindowStateKeeper('main', mainWindowOptions);\r\n\twhenReadyToShow(mainWindow).then(() => windowStateKeeper.loadState(mainWindow));\r\n\r\n\tconst exitFullscreen = () => new Promise((resolve) => {\r\n\t\tif (mainWindow.isFullScreen()) {\r\n\t\t\tmainWindow.once('leave-full-screen', resolve);\r\n\t\t\tmainWindow.setFullScreen(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tresolve();\r\n\t});\r\n\r\n\tconst close = () => {\r\n\t\tmainWindow.blur();\r\n\r\n\t\tif (process.platform === 'darwin' || state.hideOnClose) {\r\n\t\t\tmainWindow.hide();\r\n\t\t} else if (process.platform === 'win32') {\r\n\t\t\tmainWindow.minimize();\r\n\t\t} else {\r\n\t\t\tapp.quit();\r\n\t\t}\r\n\t};\r\n\r\n\tapp.on('activate', () => mainWindow && mainWindow.show());\r\n\tapp.on('before-quit', () => {\r\n\t\twindowStateKeeper.saveState.flush();\r\n\t\tmainWindow = null;\r\n\t});\r\n\r\n\tmainWindow.on('resize', () => windowStateKeeper.saveState(mainWindow));\r\n\tmainWindow.on('move', () => windowStateKeeper.saveState(mainWindow));\r\n\tmainWindow.on('show', () => windowStateKeeper.saveState(mainWindow));\r\n\tmainWindow.on('close', async(event) => {\r\n\t\tif (!mainWindow) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tevent.preventDefault();\r\n\t\tawait exitFullscreen();\r\n\t\tclose();\r\n\t\twindowStateKeeper.saveState(mainWindow);\r\n\t});\r\n\r\n\tmainWindow.on('set-state', setState);\r\n};\r\n\r\nexport const getMainWindow = async() => {\r\n\tawait whenReady();\r\n\r\n\tif (!mainWindow) {\r\n\t\tmainWindow = new BrowserWindow(mainWindowOptions);\r\n\t\tmainWindow.webContents.on('will-navigate', (event) => event.preventDefault());\r\n\t\tmainWindow.loadURL(`file://${ __dirname }/public/app.html`);\r\n\t\tattachWindowStateHandling(mainWindow);\r\n\r\n\t\tif (process.platform !== 'darwin') {\r\n\t\t\tmainWindow.setIcon(await icon.render({\r\n\t\t\t\tsize: {\r\n\t\t\t\t\twin32: [256, 128, 64, 48, 32, 24, 16],\r\n\t\t\t\t\tlinux: 128,\r\n\t\t\t\t}[process.platform],\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tif (env.name === 'development') {\r\n\t\t\tmainWindow.openDevTools();\r\n\t\t}\r\n\t}\r\n\r\n\treturn mainWindow;\r\n};\r\n\r\nexport const addServer = (serverUrl) => getMainWindow().then((mainWindow) => {\r\n\tmainWindow.show();\r\n\r\n\tif (mainWindow.isMinimized()) {\r\n\t\tmainWindow.restore();\r\n\t}\r\n\r\n\tmainWindow.send('add-host', serverUrl);\r\n});\r\n\r\nipcMain.on('focus', async() => {\r\n\tconst mainWindow = await getMainWindow();\r\n\r\n\tif (process.platform === 'win32') {\r\n\t\tif (mainWindow.isVisible()) {\r\n\t\t\tmainWindow.focus();\r\n\t\t} else if (mainWindow.isMinimized()) {\r\n\t\t\tmainWindow.restore();\r\n\t\t} else {\r\n\t\t\tmainWindow.show();\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (mainWindow.isMinimized()) {\r\n\t\tmainWindow.restore();\r\n\t\treturn;\r\n\t}\r\n\r\n\tmainWindow.show();\r\n});\r\n","import path from 'path';\r\nimport fs from 'fs';\r\nimport util from 'util';\r\nimport { app, remote } from 'electron';\r\n\r\nconst eApp = app || remote.app;\r\n\r\nlet loadedLanguage = [];\r\n\r\n/**\r\n * Load singular and plural translation based on count\r\n * @param {string} phrase The key fore the translation string\r\n * @param {number} chount Count to check for singular / plural (0-1,2-n)\r\n * @returns {string} Translation in user language\r\n */\r\nfunction loadTranslation(phrase = '', count) {\r\n\tconst loadedLanguageTranslation = loadedLanguage[phrase];\r\n\tlet translation = loadedLanguageTranslation;\r\n\tif (loadedLanguageTranslation === undefined) {\r\n\t\ttranslation = phrase;\r\n\t} else if (loadedLanguageTranslation instanceof Object) {\r\n\t\ttranslation = loadedLanguageTranslation.zero;\r\n\t\tif (count === 1) {\r\n\t\t\ttranslation = loadedLanguageTranslation.one;\r\n\t\t} else if (count > 1) {\r\n\t\t\ttranslation = loadedLanguageTranslation.multi;\r\n\t\t}\r\n\t}\r\n\treturn translation;\r\n}\r\n\r\nclass I18n {\r\n\t/**\r\n     * Load users language if available, and fallback to english for any missing strings\r\n     * @constructor\r\n     */\r\n\tconstructor() {\r\n\t\tconst load = () => {\r\n\t\t\tlet dir = path.join(__dirname, '../i18n/lang');\r\n\t\t\tif (!fs.existsSync(dir)) {\r\n\t\t\t\tdir = path.join(__dirname, 'i18n/lang');\r\n\t\t\t}\r\n\t\t\tconst defaultLocale = path.join(dir, 'en.i18n.json');\r\n\t\t\tloadedLanguage = JSON.parse(fs.readFileSync(defaultLocale, 'utf8'));\r\n\t\t\tconst locale = path.join(dir, `${ eApp.getLocale() }.i18n.json`);\r\n\t\t\tif (fs.existsSync(locale)) {\r\n\t\t\t\tconst lang = JSON.parse(fs.readFileSync(locale, 'utf8'));\r\n\t\t\t\tloadedLanguage = Object.assign(loadedLanguage, lang);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (eApp.isReady()) {\r\n\t\t\tload();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\teApp.once('ready', load);\r\n\t}\r\n\r\n\t/**\r\n     * Get translation string\r\n     * @param {string} phrase The key for the translation string\r\n     * @param {...string|number} replacements List of replacements in template strings\r\n     * @return {string} Translation in users language\r\n     */\r\n\t__(phrase, ...replacements) {\r\n\t\tconst translation = loadTranslation(phrase, 0);\r\n\t\treturn util.format(translation, ...replacements);\r\n\t}\r\n\r\n\t/**\r\n     * Get translation string\r\n     * @param {string} phrase The key for the translation string\r\n     * @param {number} count Count to check for singular / plural (0-1,2-n)\r\n     * @param {...string|number} replacements List of replacements in template strings\r\n     * @return {string} Translation in users language\r\n     */\r\n\tpluralize(phrase, count, ...replacements) {\r\n\t\tconst translation = loadTranslation(phrase, count);\r\n\t\tif (translation.includes('%s')) {\r\n\t\t\treturn util.format(translation, ...replacements);\r\n\t\t}\r\n\t\treturn translation;\r\n\t}\r\n}\r\n\r\nexport default new I18n();\r\n","import { app, BrowserWindow, ipcMain } from 'electron';\r\nimport { getMainWindow } from './mainWindow';\r\nimport i18n from '../i18n/index.js';\r\n\r\n\r\nlet aboutWindow;\r\n\r\nconst openAboutDialog = async() => {\r\n\tif (aboutWindow) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst mainWindow = await getMainWindow();\r\n\taboutWindow = new BrowserWindow({\r\n\t\ttitle: i18n.__('About %s', app.getName()),\r\n\t\tparent: mainWindow,\r\n\t\tmodal: process.platform !== 'darwin',\r\n\t\twidth: 400,\r\n\t\theight: 300,\r\n\t\ttype: 'toolbar',\r\n\t\tresizable: false,\r\n\t\tfullscreenable: false,\r\n\t\tmaximizable: false,\r\n\t\tminimizable: false,\r\n\t\tfullscreen: false,\r\n\t\tshow: false,\r\n\t});\r\n\taboutWindow.setMenuBarVisibility(false);\r\n\r\n\taboutWindow.once('ready-to-show', () => {\r\n\t\taboutWindow.show();\r\n\t});\r\n\r\n\taboutWindow.once('closed', () => {\r\n\t\taboutWindow = null;\r\n\t});\r\n\r\n\taboutWindow.params = { appName: app.getName(), appVersion: app.getVersion() };\r\n\r\n\taboutWindow.loadFile(`${ __dirname }/public/about-dialog.html`);\r\n};\r\n\r\nconst closeAboutDialog = () => {\r\n\taboutWindow && aboutWindow.destroy();\r\n};\r\n\r\nipcMain.on('open-about-dialog', () => openAboutDialog());\r\nipcMain.on('close-about-dialog', () => closeAboutDialog());\r\n","import { app, ipcMain } from 'electron';\r\nimport jetpack from 'fs-jetpack';\r\nimport path from 'path';\r\nimport env from '../env';\r\n\r\n\r\nconst definePath = () => {\r\n\tconst appName = app.getName();\r\n\tconst dirName = env.name === 'production' ? appName : `${ appName } (${ env.name })`;\r\n\r\n\tapp.setPath('userData', path.join(app.getPath('appData'), dirName));\r\n};\r\n\r\nconst reset = () => {\r\n\tconst dataDir = app.getPath('userData');\r\n\tjetpack.remove(dataDir);\r\n\tapp.relaunch({ args: [process.argv[1]] });\r\n\tapp.quit();\r\n};\r\n\r\nconst migrate = () => {\r\n\tconst olderAppName = 'Rocket.Chat+';\r\n\tconst dirName = env.name === 'production' ? olderAppName : `${ olderAppName } (${ env.name })`;\r\n\tconst olderUserDataPath = path.join(app.getPath('appData'), dirName);\r\n\r\n\ttry {\r\n\t\tjetpack.copy(olderUserDataPath, app.getPath('userData'), { overwrite: true });\r\n\t\tjetpack.remove(olderUserDataPath);\r\n\t} catch (e) {\r\n\t\treturn;\r\n\t}\r\n};\r\n\r\nconst initialize = () => {\r\n\tdefinePath();\r\n\r\n\tif (process.argv[2] === '--reset-app-data') {\r\n\t\treset();\r\n\t\treturn;\r\n\t}\r\n\r\n\tmigrate();\r\n};\r\n\r\nipcMain.on('reset-app-data', () => {\r\n\tapp.relaunch({ args: [process.argv[1], '--reset-app-data'] });\r\n\tapp.quit();\r\n});\r\n\r\nexport default {\r\n\tinitialize,\r\n};\r\n","import { app, dialog } from 'electron';\r\nimport jetpack from 'fs-jetpack';\r\nimport url from 'url';\r\nimport i18n from '../i18n/index.js';\r\n\r\nclass CertificateStore {\r\n\tinitWindow(win) {\r\n\t\tthis.storeFileName = 'certificate.json';\r\n\t\tthis.userDataDir = jetpack.cwd(app.getPath('userData'));\r\n\r\n\t\tthis.load();\r\n\r\n\t\t// Don't ask twice for same cert if loading multiple urls\r\n\t\tthis.queued = {};\r\n\r\n\t\tthis.window = win;\r\n\t\tapp.on('certificate-error', (event, webContents, url, error, certificate, callback) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tif (this.isTrusted(url, certificate)) {\r\n\t\t\t\tcallback(true);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.queued[certificate.fingerprint]) {\r\n\t\t\t\tthis.queued[certificate.fingerprint].push(callback);\r\n\t\t\t\t// Call the callback after approved/rejected\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.queued[certificate.fingerprint] = [callback];\r\n\t\t\t}\r\n\r\n\t\t\tlet detail = `URL: ${ url }\\nError: ${ error }`;\r\n\t\t\tif (this.isExisting(url)) {\r\n\t\t\t\tdetail = i18n.__('Certificate_error_different', detail);\r\n\t\t\t}\r\n\r\n\t\t\tdialog.showMessageBox(this.window, {\r\n\t\t\t\ttitle: i18n.__('Certificate_error'),\r\n\t\t\t\tmessage: i18n.__('Certificate_error_message', certificate.issuerName),\r\n\t\t\t\tdetail,\r\n\t\t\t\ttype: 'warning',\r\n\t\t\t\tbuttons: [\r\n\t\t\t\t\ti18n.__('Yes'),\r\n\t\t\t\t\ti18n.__('No'),\r\n\t\t\t\t],\r\n\t\t\t\tcancelId: 1,\r\n\t\t\t}, (response) => {\r\n\t\t\t\tif (response === 0) {\r\n\t\t\t\t\tthis.add(url, certificate);\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t\tif (webContents.getURL().indexOf('file://') === 0) {\r\n\t\t\t\t\t\twebContents.send('certificate-reload', url);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// Call all queued callbacks with result\r\n\t\t\t\tthis.queued[certificate.fingerprint].forEach((cb) => cb(response === 0));\r\n\t\t\t\tdelete this.queued[certificate.fingerprint];\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tload() {\r\n\t\ttry {\r\n\t\t\tthis.data = this.userDataDir.read(this.storeFileName, 'json');\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\tthis.data = {};\r\n\t\t}\r\n\r\n\t\tif (this.data === undefined) {\r\n\t\t\tthis.clear();\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.data = {};\r\n\t\tthis.save();\r\n\t}\r\n\r\n\tsave() {\r\n\t\tthis.userDataDir.write(this.storeFileName, this.data, { atomic: true });\r\n\t}\r\n\r\n\tparseCertificate(certificate) {\r\n\t\treturn `${ certificate.issuerName }\\n${ certificate.data.toString() }`;\r\n\t}\r\n\r\n\tgetHost(certUrl) {\r\n\t\treturn url.parse(certUrl).host;\r\n\t}\r\n\r\n\tadd(certUrl, certificate) {\r\n\t\tconst host = this.getHost(certUrl);\r\n\t\tthis.data[host] = this.parseCertificate(certificate);\r\n\t}\r\n\r\n\tisExisting(certUrl) {\r\n\t\tconst host = this.getHost(certUrl);\r\n\t\treturn this.data.hasOwnProperty(host);\r\n\t}\r\n\r\n\tisTrusted(certUrl, certificate) {\r\n\t\tconst host = this.getHost(certUrl);\r\n\t\tif (!this.isExisting(certUrl)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this.data[host] === this.parseCertificate(certificate);\r\n\t}\r\n}\r\n\r\nconst certificateStore = new CertificateStore();\r\n\r\nexport default certificateStore;\r\n","import { app } from 'electron';\r\nimport { EventEmitter } from 'events';\r\nimport { getMainWindow } from './mainWindow';\r\nimport icon from './icon';\r\n\r\n\r\nconst getBadgeText = ({ badge: { title, count } }) => {\r\n\tif (title === '•') {\r\n\t\treturn '•';\r\n\t} else if (count > 0) {\r\n\t\treturn count > 9 ? '9+' : String(count);\r\n\t} else if (title) {\r\n\t\treturn '!';\r\n\t}\r\n};\r\n\r\nlet state = {\r\n\tbadge: {\r\n\t\ttitle: '',\r\n\t\tcount: 0,\r\n\t},\r\n\tstatus: 'online',\r\n};\r\n\r\nconst instance = new (class Dock extends EventEmitter {});\r\n\r\nconst destroy = () => {\r\n\tinstance.removeAllListeners();\r\n};\r\n\r\nconst update = async(previousState) => {\r\n\tconst mainWindow = await getMainWindow();\r\n\tconst badgeText = getBadgeText(state);\r\n\r\n\tif (process.platform === 'win32') {\r\n\t\tconst image = badgeText ? await icon.render({\r\n\t\t\toverlay: true,\r\n\t\t\tsize: 16,\r\n\t\t\tbadgeText,\r\n\t\t}) : null;\r\n\t\tmainWindow.setOverlayIcon(image, badgeText || '');\r\n\r\n\t\tmainWindow.removeListener('show', update);\r\n\t\tmainWindow.on('show', update);\r\n\t}\r\n\r\n\tif (process.platform === 'darwin') {\r\n\t\tapp.dock.setBadge(badgeText || '');\r\n\t\tif (state.badge.count > 0 && previousState.badge.count === 0) {\r\n\t\t\tapp.dock.bounce();\r\n\t\t}\r\n\t}\r\n\r\n\tif (process.platform === 'linux') {\r\n\t\tmainWindow.setIcon(await icon.render({\r\n\t\t\tbadgeText,\r\n\t\t\tsize: {\r\n\t\t\t\twin32: [256, 128, 64, 48, 32, 24, 16],\r\n\t\t\t\tlinux: 128,\r\n\t\t\t}[process.platform],\r\n\t\t}));\r\n\t}\r\n\r\n\tif (!mainWindow.isFocused()) {\r\n\t\tmainWindow.flashFrame(state.badge.count > 0);\r\n\t}\r\n\r\n\tinstance.emit('update');\r\n};\r\n\r\nconst setState = (partialState) => {\r\n\tconst previousState = state;\r\n\tstate = {\r\n\t\t...state,\r\n\t\t...partialState,\r\n\t};\r\n\tupdate(previousState);\r\n};\r\n\r\nexport default Object.assign(instance, {\r\n\tdestroy,\r\n\tsetState,\r\n});\r\n","import { app, Menu } from 'electron';\r\nimport { EventEmitter } from 'events';\r\nimport { getMainWindow } from './mainWindow';\r\nimport i18n from '../i18n/index.js';\r\n\r\nconst createTemplate = ({\r\n\tappName,\r\n\tservers = [],\r\n\tcurrentServerUrl = null,\r\n\tshowTrayIcon = true,\r\n\tshowUserStatusInTray = true,\r\n\tshowFullScreen = false,\r\n\tshowMenuBar = true,\r\n\tshowServerList = true,\r\n\tshowWindowOnUnreadChanged = false,\r\n}, events) => ([\r\n\t{\r\n\t\tlabel: process.platform === 'darwin' ? appName : i18n.__('&File'),\r\n\t\tsubmenu: [\r\n\t\t\t...(process.platform === 'darwin' ? [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 'about',\r\n\t\t\t\t\tlabel: i18n.__('About %s', appName),\r\n\t\t\t\t\tclick: () => events.emit('about'),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'separator',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tsubmenu: [],\r\n\t\t\t\t\trole: 'services',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'separator',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\taccelerator: 'Command+H',\r\n\t\t\t\t\trole: 'hide',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\taccelerator: 'Command+Alt+H',\r\n\t\t\t\t\trole: 'hideothers',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trole: 'unhide',\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'separator',\r\n\t\t\t\t},\r\n\t\t\t] : []),\r\n\t\t\t// {\r\n\t\t\t// \tlabel: i18n.__('Preferences'),\r\n\t\t\t// \taccelerator: 'CommandOrControl+,',\r\n\t\t\t// \tclick: () => events.emit('preferences'),\r\n\t\t\t// },\r\n\t\t\t...(process.platform !== 'darwin' ? [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: i18n.__('Add &new server'),\r\n\t\t\t\t\taccelerator: 'CommandOrControl+N',\r\n\t\t\t\t\tclick: () => events.emit('add-new-server'),\r\n\t\t\t\t},\r\n\t\t\t] : []),\r\n\t\t\t{\r\n\t\t\t\ttype: 'separator',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: 'quit',\r\n\t\t\t\tlabel: i18n.__('&Quit %s', appName),\r\n\t\t\t\taccelerator: 'CommandOrControl+Q',\r\n\t\t\t\tclick: () => events.emit('quit'),\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\t{\r\n\t\tlabel: i18n.__('&Edit'),\r\n\t\tsubmenu: [\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('&Undo'),\r\n\t\t\t\taccelerator: 'CommandOrControl+Z',\r\n\t\t\t\trole: 'undo',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('&Redo'),\r\n\t\t\t\taccelerator: process.platform === 'win32' ? 'Control+Y' : 'CommandOrControl+Shift+Z',\r\n\t\t\t\trole: 'redo',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'separator',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Cu&t'),\r\n\t\t\t\taccelerator: 'CommandOrControl+X',\r\n\t\t\t\trole: 'cut',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('&Copy'),\r\n\t\t\t\taccelerator: 'CommandOrControl+C',\r\n\t\t\t\trole: 'copy',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('&Paste'),\r\n\t\t\t\taccelerator: 'CommandOrControl+V',\r\n\t\t\t\trole: 'paste',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Select &all'),\r\n\t\t\t\taccelerator: 'CommandOrControl+A',\r\n\t\t\t\trole: 'selectall',\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\t{\r\n\t\tlabel: i18n.__('&View'),\r\n\t\tsubmenu: [\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('&Reload'),\r\n\t\t\t\taccelerator: 'CommandOrControl+R',\r\n\t\t\t\tclick: () => events.emit('reload-server'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Reload ignoring cache'),\r\n\t\t\t\tclick: () => events.emit('reload-server', { ignoringCache: true }),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Clear trusted certificates'),\r\n\t\t\t\tclick: () => events.emit('reload-server', { ignoringCache: true, clearCertificates: true }),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Open &DevTools'),\r\n\t\t\t\taccelerator: process.platform === 'darwin' ? 'Command+Alt+I' : 'Ctrl+Shift+I',\r\n\t\t\t\tclick: () => events.emit('open-devtools-for-server'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'separator',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('&Back'),\r\n\t\t\t\taccelerator: process.platform === 'darwin' ? 'Command+[' : 'Alt+Left',\r\n\t\t\t\tclick: () => events.emit('go-back'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('&Forward'),\r\n\t\t\t\taccelerator: process.platform === 'darwin' ? 'Command+]' : 'Alt+Right',\r\n\t\t\t\tclick: () => events.emit('go-forward'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'separator',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Tray icon'),\r\n\t\t\t\ttype: 'checkbox',\r\n\t\t\t\tchecked: showTrayIcon,\r\n\t\t\t\tclick: () => events.emit('toggle', 'showTrayIcon'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('User status in tray'),\r\n\t\t\t\ttype: 'checkbox',\r\n\t\t\t\tenabled: showTrayIcon,\r\n\t\t\t\tchecked: showTrayIcon && showUserStatusInTray,\r\n\t\t\t\tclick: () => events.emit('toggle', 'showUserStatusInTray'),\r\n\t\t\t},\r\n\t\t\t...(process.platform === 'darwin' ? [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: i18n.__('Full screen'),\r\n\t\t\t\t\ttype: 'checkbox',\r\n\t\t\t\t\tchecked: showFullScreen,\r\n\t\t\t\t\taccelerator: 'Control+Command+F',\r\n\t\t\t\t\tclick: () => events.emit('toggle', 'showFullScreen'),\r\n\t\t\t\t},\r\n\t\t\t] : [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: i18n.__('Menu bar'),\r\n\t\t\t\t\ttype: 'checkbox',\r\n\t\t\t\t\tchecked: showMenuBar,\r\n\t\t\t\t\tclick: () => events.emit('toggle', 'showMenuBar'),\r\n\t\t\t\t},\r\n\t\t\t]),\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Server list'),\r\n\t\t\t\ttype: 'checkbox',\r\n\t\t\t\tchecked: showServerList,\r\n\t\t\t\tclick: () => events.emit('toggle', 'showServerList'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'separator',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Reset zoom'),\r\n\t\t\t\taccelerator: 'CommandOrControl+0',\r\n\t\t\t\trole: 'resetzoom',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Zoom in'),\r\n\t\t\t\taccelerator: 'CommandOrControl+Plus',\r\n\t\t\t\trole: 'zoomin',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Zoom out'),\r\n\t\t\t\taccelerator: 'CommandOrControl+-',\r\n\t\t\t\trole: 'zoomout',\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\t{\r\n\t\tlabel: i18n.__('&Window'),\r\n\t\tid: 'window',\r\n\t\trole: 'window',\r\n\t\tsubmenu: [\r\n\t\t\t...(process.platform === 'darwin' ? [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: i18n.__('Add &new server'),\r\n\t\t\t\t\taccelerator: 'CommandOrControl+N',\r\n\t\t\t\t\tclick: () => events.emit('add-new-server'),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'separator',\r\n\t\t\t\t},\r\n\t\t\t] : []),\r\n\t\t\t...servers.map((host, i) => ({\r\n\t\t\t\tlabel: host.title.replace(/&/g, '&&'),\r\n\t\t\t\ttype: currentServerUrl ? 'radio' : 'normal',\r\n\t\t\t\tchecked: currentServerUrl === host.url,\r\n\t\t\t\taccelerator: `CommandOrControl+${ i + 1 }`,\r\n\t\t\t\tid: host.url,\r\n\t\t\t\tclick: () => events.emit('select-server', host),\r\n\t\t\t})),\r\n\t\t\t{\r\n\t\t\t\ttype: 'separator',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('&Reload'),\r\n\t\t\t\taccelerator: 'CommandOrControl+Shift+R',\r\n\t\t\t\tclick: () => events.emit('reload-app'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Toggle &DevTools'),\r\n\t\t\t\tclick: () => events.emit('toggle-devtools'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'separator',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Show on unread messages'),\r\n\t\t\t\ttype: 'checkbox',\r\n\t\t\t\tchecked: showWindowOnUnreadChanged,\r\n\t\t\t\tclick: () => events.emit('toggle', 'showWindowOnUnreadChanged'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'separator',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Minimize'),\r\n\t\t\t\taccelerator: 'CommandOrControl+M',\r\n\t\t\t\trole: 'minimize',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Close'),\r\n\t\t\t\taccelerator: 'CommandOrControl+W',\r\n\t\t\t\trole: 'close',\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\t{\r\n\t\tlabel: i18n.__('&Help'),\r\n\t\trole: 'help',\r\n\t\tsubmenu: [\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Documentation'),\r\n\t\t\t\tclick: () => events.emit('open-url', 'https://rocket.chat/docs'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'separator',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Report issue'),\r\n\t\t\t\tclick: () => events.emit('open-url', 'https://github.com/RocketChat/Rocket.Chat.Electron/issues/new'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Reset app data'),\r\n\t\t\t\tclick: () => events.emit('reset-app-data'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'separator',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('Learn more'),\r\n\t\t\t\tclick: () => events.emit('open-url', 'https://rocket.chat'),\r\n\t\t\t},\r\n\t\t\t...(process.platform !== 'darwin' ? [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 'about',\r\n\t\t\t\t\tlabel: i18n.__('About %s', appName),\r\n\t\t\t\t\tclick: () => events.emit('about'),\r\n\t\t\t\t},\r\n\t\t\t] : []),\r\n\t\t],\r\n\t},\r\n]);\r\n\r\nclass Menus extends EventEmitter {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tsetState(partialState) {\r\n\t\tthis.state = {\r\n\t\t\t...this.state,\r\n\t\t\t...partialState,\r\n\t\t};\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tgetItem(id) {\r\n\t\treturn Menu.getApplicationMenu().getMenuItemById(id);\r\n\t}\r\n\r\n\tasync update() {\r\n\t\tconst template = createTemplate({ appName: app.getName(), ...this.state }, this);\r\n\t\tconst menu = Menu.buildFromTemplate(template);\r\n\t\tMenu.setApplicationMenu(menu);\r\n\r\n\t\tif (process.platform !== 'darwin') {\r\n\t\t\tconst { showMenuBar } = this.state;\r\n\t\t\tconst mainWindow = await getMainWindow();\r\n\t\t\tmainWindow.setAutoHideMenuBar(!showMenuBar);\r\n\t\t\tmainWindow.setMenuBarVisibility(!!showMenuBar);\r\n\t\t}\r\n\r\n\t\tthis.emit('update');\r\n\t}\r\n}\r\n\r\nexport default new Menus();\r\n","import { app, ipcMain, Notification } from 'electron';\r\nimport freedesktopNotifications from 'freedesktop-notifications';\r\nimport os from 'os';\r\nimport path from 'path';\r\n\r\n\r\nclass BaseNotification {\r\n\tconstructor(options = {}) {\r\n\t\tthis.handleShow = this.handleShow.bind(this);\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n\t\tthis.handleClose = this.handleClose.bind(this);\r\n\t\tthis.initialize(options);\r\n\t}\r\n\r\n\thandleShow() {\r\n\t\tconst { id, eventTarget } = this;\r\n\t\teventTarget && !eventTarget.isDestroyed() && eventTarget.send('notification-shown', id);\r\n\t}\r\n\r\n\thandleClick() {\r\n\t\tconst { id, eventTarget } = this;\r\n\t\teventTarget && !eventTarget.isDestroyed() && eventTarget.send('notification-clicked', id);\r\n\t}\r\n\r\n\thandleClose() {\r\n\t\tconst { id, eventTarget } = this;\r\n\t\teventTarget && !eventTarget.isDestroyed() && eventTarget.send('notification-closed', id);\r\n\t}\r\n\r\n\tinitialize(/* options = {} */) {}\r\n\treset(/* options = {} */) {}\r\n\tshow() {}\r\n\tclose() {}\r\n}\r\n\r\n\r\nclass ElectronNotification extends BaseNotification {\r\n\tinitialize({ title, body, icon, silent } = {}) {\r\n\t\tthis.notification = new Notification({\r\n\t\t\ttitle,\r\n\t\t\tbody,\r\n\t\t\ticon: icon && path.resolve(icon),\r\n\t\t\tsilent,\r\n\t\t});\r\n\r\n\t\tthis.notification.on('show', this.handleShow);\r\n\t\tthis.notification.on('click', this.handleClick);\r\n\t\tthis.notification.on('close', this.handleClose);\r\n\t}\r\n\r\n\treset(options = {}) {\r\n\t\tthis.notification.removeAllListeners();\r\n\t\tthis.notification.close();\r\n\t\tthis.createNotification(options);\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.notification.show();\r\n\t}\r\n\r\n\tclose() {\r\n\t\tthis.notification.close();\r\n\t}\r\n}\r\n\r\n\r\nclass FreeDesktopNotification extends BaseNotification {\r\n\tescapeBody(body) {\r\n\t\tconst escapeMap = {\r\n\t\t\t'&': '&amp;',\r\n\t\t\t'<': '&lt;',\r\n\t\t\t'>': '&gt;',\r\n\t\t\t'\"': '&quot;',\r\n\t\t\t'\\'': '&#x27;',\r\n\t\t\t'`': '&#x60;',\r\n\t\t};\r\n\r\n\t\tconst escapeRegex = new RegExp(`(?:${ Object.keys(escapeMap).join('|') })`, 'g');\r\n\r\n\t\treturn body.replace(escapeRegex, (match) => escapeMap[match]);\r\n\t}\r\n\r\n\tinitialize({ title, body, icon, silent } = {}) {\r\n\t\tthis.notification = freedesktopNotifications.createNotification({\r\n\t\t\tsummary: title,\r\n\t\t\tbody: body && this.escapeBody(body),\r\n\t\t\ticon: icon ? path.resolve(icon) : 'info',\r\n\t\t\tappName: app.getName(),\r\n\t\t\ttimeout: 24 * 60 * 60 * 1000,\r\n\t\t\tsound: silent ? undefined : 'message-new-instant',\r\n\t\t\tactions: process.env.XDG_CURRENT_DESKTOP !== 'Unity' ? {\r\n\t\t\t\tdefault: '',\r\n\t\t\t} : null,\r\n\t\t});\r\n\r\n\t\tthis.notification.on('action', (action) => action === 'default' && this.handleClick());\r\n\t\tthis.notification.on('close', this.handleClose);\r\n\t}\r\n\r\n\treset({ title, body, icon } = {}) {\r\n\t\tthis.notification.set({\r\n\t\t\tsummary: title,\r\n\t\t\tbody,\r\n\t\t\ticon: icon ? path.resolve(icon) : 'info',\r\n\t\t});\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.notification.push(this.handleShow);\r\n\t}\r\n\r\n\tclose() {\r\n\t\tthis.notification.close();\r\n\t}\r\n}\r\n\r\n\r\nconst ImplementatedNotification = (() => {\r\n\tif (os.platform() === 'linux') {\r\n\t\treturn FreeDesktopNotification;\r\n\t}\r\n\r\n\treturn ElectronNotification;\r\n})();\r\n\r\nconst instances = new Map();\r\n\r\nlet creationCount = 1;\r\n\r\nconst createOrGetNotification = (options = {}) => {\r\n\tconst tag = options.tag ? JSON.stringify(options.tag) : null;\r\n\r\n\tif (!tag || !instances.get(tag)) {\r\n\t\tconst notification = new ImplementatedNotification(options);\r\n\t\tnotification.id = tag || creationCount++;\r\n\r\n\t\tinstances.set(notification.id, notification);\r\n\t\treturn notification;\r\n\t}\r\n\r\n\tconst notification = instances.get(tag);\r\n\tnotification.reset(options);\r\n\treturn notification;\r\n};\r\n\r\n\r\nipcMain.on('request-notification', (event, options) => {\r\n\ttry {\r\n\t\tconst notification = createOrGetNotification(options);\r\n\t\tnotification.eventTarget = event.sender;\r\n\t\tevent.returnValue = notification.id;\r\n\t\tsetImmediate(() => notification.show());\r\n\t} catch (e) {\r\n\t\tconsole.error(e);\r\n\t\tevent.returnValue = -1;\r\n\t}\r\n});\r\n\r\nipcMain.on('close-notification', (event, id) => {\r\n\ttry {\r\n\t\tconst notification = instances.get(id);\r\n\t\tif (notification) {\r\n\t\t\tnotification.close();\r\n\t\t\tinstances.delete(id);\r\n\t\t}\r\n\t} catch (e) {\r\n\t\tconsole.error(e);\r\n\t}\r\n});\r\n\r\n\r\napp.on('before-quit', () => {\r\n\tinstances.forEach((notification) => {\r\n\t\tnotification.close();\r\n\t});\r\n});\r\n","import { app, BrowserWindow, ipcMain } from 'electron';\r\nimport { getMainWindow } from './mainWindow';\r\nimport i18n from '../i18n/index.js';\r\n\r\n\r\nlet screenshareWindow;\r\n\r\nconst openScreenshareDialog = async() => {\r\n\tif (screenshareWindow) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst mainWindow = await getMainWindow();\r\n\tscreenshareWindow = new BrowserWindow({\r\n\t\ttitle: i18n.__('About %s', app.getName()),\r\n\t\tparent: mainWindow,\r\n\t\twidth: 776,\r\n\t\theight: 600,\r\n\t\ttype: 'toolbar',\r\n\t\tresizable: false,\r\n\t\tfullscreenable: false,\r\n\t\tmaximizable: false,\r\n\t\tminimizable: false,\r\n\t\tfullscreen: false,\r\n\t\tskipTaskbar: false,\r\n\t\tcenter: true,\r\n\t\tshow: false,\r\n\t});\r\n\tscreenshareWindow.setMenuBarVisibility(false);\r\n\r\n\tscreenshareWindow.once('ready-to-show', () => {\r\n\t\tscreenshareWindow.show();\r\n\t});\r\n\r\n\tscreenshareWindow.once('closed', () => {\r\n\t\tif (!screenshareWindow.resultSent) {\r\n\t\t\tmainWindow.webContents.send('screenshare-result', 'PermissionDeniedError');\r\n\t\t}\r\n\t\tscreenshareWindow = null;\r\n\t});\r\n\r\n\tscreenshareWindow.loadFile(`${ __dirname }/public/screenshare-dialog.html`);\r\n};\r\n\r\nconst closeScreenshareDialog = () => {\r\n\tscreenshareWindow && screenshareWindow.destroy();\r\n};\r\n\r\nconst selectScreenshareSource = async(id) => {\r\n\tconst mainWindow = await getMainWindow();\r\n\tmainWindow.webContents.send('screenshare-result', id);\r\n\tif (screenshareWindow) {\r\n\t\tscreenshareWindow.resultSent = true;\r\n\t\tscreenshareWindow.destroy();\r\n\t}\r\n};\r\n\r\nipcMain.on('open-screenshare-dialog', () => openScreenshareDialog());\r\nipcMain.on('close-screenshare-dialog', () => closeScreenshareDialog());\r\nipcMain.on('select-screenshare-source', (e, id) => selectScreenshareSource(id));\r\n","import { Menu, Tray as TrayIcon } from 'electron';\r\nimport { EventEmitter } from 'events';\r\nimport icon from './icon';\r\nimport i18n from '../i18n/index.js';\r\n\r\n\r\nconst getIconStyle = ({ badge: { title, count }, status, showUserStatus }) => {\r\n\tconst style = {\r\n\t\ttemplate: process.platform === 'darwin',\r\n\t\tsize: {\r\n\t\t\tdarwin: 24,\r\n\t\t\twin32: [32, 24, 16],\r\n\t\t\tlinux: 22,\r\n\t\t}[process.platform],\r\n\t};\r\n\r\n\tif (showUserStatus) {\r\n\t\tstyle.status = status;\r\n\t}\r\n\r\n\tif (process.platform !== 'darwin') {\r\n\t\tif (title === '•') {\r\n\t\t\tstyle.badgeText = '•';\r\n\t\t} else if (count > 0) {\r\n\t\t\tstyle.badgeText = count > 9 ? '9+' : String(count);\r\n\t\t} else if (title) {\r\n\t\t\tstyle.badgeText = '!';\r\n\t\t}\r\n\t}\r\n\r\n\treturn style;\r\n};\r\n\r\nconst getIconTitle = ({ badge: { title, count } }) => ((count > 0) ? title : '');\r\n\r\nconst getIconTooltip = ({ badge: { count } }) => i18n.pluralize('Message_count', count, count);\r\n\r\nconst createContextMenuTemplate = ({ isMainWindowVisible }, events) => ([\r\n\t{\r\n\t\tlabel: !isMainWindowVisible ? i18n.__('Show') : i18n.__('Hide'),\r\n\t\tclick: () => events.emit('set-main-window-visibility', !isMainWindowVisible),\r\n\t},\r\n\t{\r\n\t\tlabel: i18n.__('Quit'),\r\n\t\tclick: () => events.emit('quit'),\r\n\t},\r\n]);\r\n\r\nlet trayIcon = null;\r\n\r\nlet state = {\r\n\tbadge: {\r\n\t\ttitle: '',\r\n\t\tcount: 0,\r\n\t},\r\n\tstatus: 'online',\r\n\tisMainWindowVisible: true,\r\n\tshowIcon: true,\r\n\tshowUserStatus: true,\r\n};\r\n\r\nconst instance = new (class Tray extends EventEmitter {});\r\n\r\nconst createIcon = (image) => {\r\n\tif (trayIcon) {\r\n\t\treturn;\r\n\t}\r\n\r\n\ttrayIcon = new TrayIcon(image);\r\n\r\n\ttrayIcon.on('click', () => instance.emit('set-main-window-visibility', !state.isMainWindowVisible));\r\n\ttrayIcon.on('right-click', (event, bounds) => trayIcon.popUpContextMenu(undefined, bounds));\r\n\r\n\tinstance.emit('created');\r\n};\r\n\r\nconst destroyIcon = () => {\r\n\tif (!trayIcon) {\r\n\t\treturn;\r\n\t}\r\n\r\n\ttrayIcon.destroy();\r\n\tinstance.emit('destroyed');\r\n\ttrayIcon = null;\r\n};\r\n\r\nconst destroy = () => {\r\n\tdestroyIcon();\r\n\tinstance.removeAllListeners();\r\n};\r\n\r\nconst update = async() => {\r\n\tif (!state.showIcon) {\r\n\t\tdestroyIcon();\r\n\t\tinstance.emit('update');\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst image = await icon.render(getIconStyle(state));\r\n\r\n\tif (!trayIcon) {\r\n\t\tcreateIcon(image);\r\n\t} else {\r\n\t\ttrayIcon.setImage(image);\r\n\t}\r\n\r\n\ttrayIcon.setToolTip(getIconTooltip(state));\r\n\r\n\tif (process.platform === 'darwin') {\r\n\t\ttrayIcon.setTitle(getIconTitle(state));\r\n\t}\r\n\r\n\tconst template = createContextMenuTemplate(state, instance);\r\n\tconst menu = Menu.buildFromTemplate(template);\r\n\ttrayIcon.setContextMenu(menu);\r\n\tinstance.emit('update');\r\n};\r\n\r\nconst setState = (partialState) => {\r\n\tstate = {\r\n\t\t...state,\r\n\t\t...partialState,\r\n\t};\r\n\tupdate();\r\n};\r\n\r\nexport default Object.assign(instance, {\r\n\tdestroy,\r\n\tsetState,\r\n});\r\n","import { app, BrowserWindow, ipcMain } from 'electron';\r\nimport { getMainWindow } from './mainWindow';\r\nimport i18n from '../i18n/index.js';\r\n\r\n\r\nlet updateWindow;\r\n\r\nconst openUpdateDialog = async({ currentVersion = app.getVersion(), newVersion } = {}) => {\r\n\tif (updateWindow) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst mainWindow = await getMainWindow();\r\n\tupdateWindow = new BrowserWindow({\r\n\t\ttitle: i18n.__('Update_Available'),\r\n\t\tparent: mainWindow,\r\n\t\tmodal: process.platform !== 'darwin',\r\n\t\twidth: 600,\r\n\t\theight: 330,\r\n\t\ttype: 'toolbar',\r\n\t\tresizable: false,\r\n\t\tfullscreenable: false,\r\n\t\tmaximizable: false,\r\n\t\tminimizable: false,\r\n\t\tfullscreen: false,\r\n\t\tshow: false,\r\n\t});\r\n\tupdateWindow.setMenuBarVisibility(false);\r\n\r\n\tupdateWindow.once('ready-to-show', () => {\r\n\t\tupdateWindow.show();\r\n\t});\r\n\r\n\tupdateWindow.once('closed', () => {\r\n\t\tupdateWindow = null;\r\n\t});\r\n\r\n\tupdateWindow.params = { currentVersion, newVersion };\r\n\r\n\tupdateWindow.loadFile(`${ __dirname }/public/update-dialog.html`);\r\n};\r\n\r\nconst closeUpdateDialog = () => {\r\n\tupdateWindow.destroy();\r\n};\r\n\r\nipcMain.on('open-update-dialog', (e, ...args) => openUpdateDialog(...args));\r\nipcMain.on('close-update-dialog', () => closeUpdateDialog());\r\n","import { app, dialog, ipcMain } from 'electron';\r\nimport { autoUpdater } from 'electron-updater';\r\nimport jetpack from 'fs-jetpack';\r\nimport { getMainWindow } from './mainWindow';\r\nimport i18n from '../i18n/index.js';\r\n\r\n\r\nconst appDir = jetpack.cwd(app.getAppPath(), app.getAppPath().endsWith('app.asar') ? '..' : '.');\r\nconst userDataDir = jetpack.cwd(app.getPath('userData'));\r\nconst updateSettingsFileName = 'update.json';\r\n\r\nconst loadUpdateSettings = (dir) => {\r\n\ttry {\r\n\t\treturn dir.read(updateSettingsFileName, 'json') || {};\r\n\t} catch (error) {\r\n\t\tconsole.error(error);\r\n\t\treturn {};\r\n\t}\r\n};\r\n\r\nconst appUpdateSettings = loadUpdateSettings(appDir);\r\nconst userUpdateSettings = loadUpdateSettings(userDataDir);\r\nconst updateSettings = (() => {\r\n\tconst defaultUpdateSettings = { autoUpdate: true, canUpdate: true };\r\n\r\n\tif (appUpdateSettings.forced) {\r\n\t\treturn Object.assign({}, defaultUpdateSettings, appUpdateSettings);\r\n\t} else {\r\n\t\treturn Object.assign({}, defaultUpdateSettings, appUpdateSettings, userUpdateSettings);\r\n\t}\r\n})();\r\ndelete updateSettings.forced;\r\n\r\nconst saveUpdateSettings = () => {\r\n\tif (appUpdateSettings.forced) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tuserDataDir.write(updateSettingsFileName, userUpdateSettings, { atomic: true });\r\n};\r\n\r\nconst canUpdate = () => updateSettings.canUpdate &&\r\n\t(\r\n\t\t(process.platform === 'linux' && Boolean(process.env.APPIMAGE)) ||\r\n\t\t(process.platform === 'win32' && !process.windowsStore) ||\r\n\t\t(process.platform === 'darwin' && !process.mas)\r\n\t);\r\n\r\nconst canAutoUpdate = () => updateSettings.autoUpdate !== false;\r\n\r\nconst canSetAutoUpdate = () => !appUpdateSettings.forced || appUpdateSettings.autoUpdate !== false;\r\n\r\nconst setAutoUpdate = (canAutoUpdate) => {\r\n\tif (!canSetAutoUpdate()) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tupdateSettings.autoUpdate = userUpdateSettings.autoUpdate = Boolean(canAutoUpdate);\r\n\tsaveUpdateSettings();\r\n};\r\n\r\nconst skipUpdateVersion = (version) => {\r\n\tuserUpdateSettings.skip = version;\r\n\tsaveUpdateSettings();\r\n};\r\n\r\nconst downloadUpdate = () => {\r\n\tautoUpdater.downloadUpdate();\r\n};\r\n\r\nlet checkForUpdatesEvent = null;\r\n\r\nconst checkForUpdates = (e = null, { forced = false } = {}) => {\r\n\tif (checkForUpdatesEvent) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ((forced || canAutoUpdate()) && canUpdate()) {\r\n\t\tcheckForUpdatesEvent = e;\r\n\t\tautoUpdater.checkForUpdates();\r\n\t}\r\n};\r\n\r\nconst sendToMainWindow = async(channel, ...args) => {\r\n\tconst mainWindow = await getMainWindow();\r\n\tconst send = () => mainWindow.send(channel, ...args);\r\n\r\n\tif (mainWindow.webContents.isLoading()) {\r\n\t\tmainWindow.webContents.on('dom-ready', send);\r\n\t\treturn;\r\n\t}\r\n\r\n\tsend();\r\n};\r\n\r\nconst handleCheckingForUpdate = () => {\r\n\tsendToMainWindow('update-checking');\r\n};\r\n\r\nconst handleUpdateAvailable = ({ version }) => {\r\n\tif (checkForUpdatesEvent) {\r\n\t\tcheckForUpdatesEvent.sender.send('update-result', true);\r\n\t\tcheckForUpdatesEvent = null;\r\n\t} else if (updateSettings.skip === version) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tipcMain.emit('close-about-dialog');\r\n\tipcMain.emit('open-update-dialog', undefined, { newVersion: version });\r\n};\r\n\r\nconst handleUpdateNotAvailable = () => {\r\n\tsendToMainWindow('update-not-available');\r\n\r\n\tif (checkForUpdatesEvent) {\r\n\t\tcheckForUpdatesEvent.sender.send('update-result', false);\r\n\t\tcheckForUpdatesEvent = null;\r\n\t}\r\n};\r\n\r\nconst handleUpdateDownloaded = async() => {\r\n\tconst mainWindow = await getMainWindow();\r\n\r\n\tconst response = dialog.showMessageBox(mainWindow, {\r\n\t\ttype: 'question',\r\n\t\ttitle: i18n.__('Update_ready'),\r\n\t\tmessage: i18n.__('Update_ready_message'),\r\n\t\tbuttons: [\r\n\t\t\ti18n.__('Update_Install_Later'),\r\n\t\t\ti18n.__('Update_Install_Now'),\r\n\t\t],\r\n\t\tdefaultId: 1,\r\n\t});\r\n\r\n\tif (response === 0) {\r\n\t\tdialog.showMessageBox(mainWindow, {\r\n\t\t\ttype: 'info',\r\n\t\t\ttitle: i18n.__('Update_installing_later'),\r\n\t\t\tmessage: i18n.__('Update_installing_later_message'),\r\n\t\t\tbuttons: [i18n.__('OK')],\r\n\t\t\tdefaultId: 0,\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\r\n\tmainWindow.removeAllListeners();\r\n\tapp.removeAllListeners('window-all-closed');\r\n\tautoUpdater.quitAndInstall();\r\n};\r\n\r\nconst handleError = async(error) => {\r\n\tsendToMainWindow('update-error', error);\r\n\r\n\tif (checkForUpdatesEvent) {\r\n\t\tcheckForUpdatesEvent.sender.send('update-result', false);\r\n\t\tcheckForUpdatesEvent = null;\r\n\t}\r\n};\r\n\r\nautoUpdater.autoDownload = false;\r\nautoUpdater.on('checking-for-update', handleCheckingForUpdate);\r\nautoUpdater.on('update-available', handleUpdateAvailable);\r\nautoUpdater.on('update-not-available', handleUpdateNotAvailable);\r\nautoUpdater.on('update-downloaded', handleUpdateDownloaded);\r\nautoUpdater.on('error', handleError);\r\n\r\nipcMain.on('can-update', (e) => { e.returnValue = canUpdate(); });\r\nipcMain.on('can-auto-update', (e) => { e.returnValue = canAutoUpdate(); });\r\nipcMain.on('can-set-auto-update', (e) => { e.returnValue = canSetAutoUpdate(); });\r\nipcMain.on('set-auto-update', (e, canAutoUpdate) => setAutoUpdate(canAutoUpdate));\r\nipcMain.on('check-for-updates', (e, ...args) => checkForUpdates(e, ...args));\r\nipcMain.on('skip-update-version', (e, ...args) => skipUpdateVersion(...args));\r\nipcMain.on('remind-update-later', () => {});\r\nipcMain.on('download-update', () => downloadUpdate());\r\n","import { app } from 'electron';\r\n\r\nlet servers = {};\r\n\r\nexport default {\r\n\tloadServers(s) {\r\n\t\tservers = s;\r\n\t},\r\n\r\n\tgetServers() {\r\n\t\treturn servers;\r\n\t},\r\n};\r\n\r\napp.on('login', function(event, webContents, request, authInfo, callback) {\r\n\tfor (const url of Object.keys(servers)) {\r\n\t\tconst server = servers[url];\r\n\t\tif (request.url.indexOf(url) === 0 && server.username) {\r\n\t\t\tcallback(server.username, server.password);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n});\r\n","import { app, ipcMain, Menu } from 'electron';\r\nimport querystring from 'querystring';\r\nimport url from 'url';\r\nimport idle from '@paulcbetts/system-idle-time';\r\n\r\nimport './background/aboutDialog';\r\nimport appData from './background/appData';\r\nimport certificate from './background/certificate';\r\nimport dock from './background/dock';\r\nimport { addServer, getMainWindow } from './background/mainWindow';\r\nimport menus from './background/menus';\r\nimport './background/notifications';\r\nimport './background/screenshareDialog';\r\nimport tray from './background/tray';\r\nimport './background/updateDialog';\r\nimport './background/updates';\r\n\r\nimport i18n from './i18n/index.js';\r\n\r\nexport { default as remoteServers } from './background/servers';\r\nexport { certificate, dock, menus, tray };\r\n\r\n\r\nprocess.env.GOOGLE_API_KEY = 'AIzaSyADqUh_c1Qhji3Cp1NE43YrcpuPkmhXD-c';\r\n\r\nconst unsetDefaultApplicationMenu = () => {\r\n\tif (process.platform !== 'darwin') {\r\n\t\tMenu.setApplicationMenu(null);\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst emptyMenuTemplate = [{\r\n\t\tlabel: app.getName(),\r\n\t\tsubmenu: [\r\n\t\t\t{\r\n\t\t\t\tlabel: i18n.__('&Quit %s', app.getName()),\r\n\t\t\t\taccelerator: 'CommandOrControl+Q',\r\n\t\t\t\tclick() {\r\n\t\t\t\t\tapp.quit();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t],\r\n\t}];\r\n\tMenu.setApplicationMenu(Menu.buildFromTemplate(emptyMenuTemplate));\r\n};\r\n\r\nconst parseProtocolUrls = (args) =>\r\n\targs.filter((arg) => /^rocketchat:\\/\\/./.test(arg))\r\n\t\t.map((uri) => url.parse(uri))\r\n\t\t.map(({ hostname, pathname, query }) => {\r\n\t\t\tconst { insecure } = querystring.parse(query);\r\n\t\t\treturn `${ insecure === 'true' ? 'http' : 'https' }://${ hostname }${ pathname || '' }`;\r\n\t\t});\r\n\r\nconst addServers = (protocolUrls) => parseProtocolUrls(protocolUrls)\r\n\t.forEach((serverUrl) => addServer(serverUrl));\r\n\r\n// macOS only\r\napp.on('open-url', (event, url) => {\r\n\tevent.preventDefault();\r\n\taddServers([url]);\r\n});\r\n\r\napp.on('window-all-closed', () => {\r\n\tapp.quit();\r\n});\r\n\r\nif (!app.isDefaultProtocolClient('rocketchat')) {\r\n\tapp.setAsDefaultProtocolClient('rocketchat');\r\n}\r\n\r\napp.setAppUserModelId('chat.rocket');\r\nif (process.platform === 'linux') {\r\n\tapp.disableHardwareAcceleration();\r\n}\r\n\r\nipcMain.on('getSystemIdleTime', (event) => {\r\n\tevent.returnValue = idle.getIdleTime();\r\n});\r\n\r\nprocess.on('unhandledRejection', console.error.bind(console));\r\n\r\n\r\nconst gotTheLock = app.requestSingleInstanceLock();\r\n\r\nif (gotTheLock) {\r\n\tapp.on('second-instance', async(event, argv) => {\r\n\t\t(await getMainWindow()).show();\r\n\t\taddServers(argv.slice(2));\r\n\t});\r\n\r\n\tapp.on('ready', async() => {\r\n\t\tunsetDefaultApplicationMenu();\r\n\r\n\t\tappData.initialize();\r\n\r\n\t\tconst mainWindow = await getMainWindow();\r\n\t\tcertificate.initWindow(mainWindow);\r\n\r\n\t\tipcMain.emit('check-for-updates');\r\n\t});\r\n} else {\r\n\tapp.quit();\r\n}\r\n"],"names":["app","screen","BrowserWindow","nativeImage","ipcMain","remote","url","dialog","state","EventEmitter","setState","events","Menu","Notification","instance","TrayIcon","destroy","update","autoUpdater","certificate"],"mappings":"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"}